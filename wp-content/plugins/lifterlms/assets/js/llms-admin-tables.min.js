!function(t,a){window.llms=window.llms||{};var e=function(){function a(t,a){var e=null;return function(){var n=this,r=arguments;window.clearTimeout(e),e=window.setTimeout(function(){t.apply(n,r)},a)}}this.$tables=null,this.init=function(){var a=this;a.$tables=t(".llms-gb-table"),a.$tables.length&&a.bind()},this.bind=function(){var e=this;this.$tables.each(function(){var n=t(this);n.on("click",'button[name="llms-table-paging"]',function(){e.change_page(n,t(this))}),n.on("click","a.llms-sortable",function(a){a.preventDefault(),e.change_order(n,t(this))}),n.parent().find(".llms-table-search").on("keyup","input",a(function(a){switch(a.keyCode){case 37:case 38:case 39:case 40:return;default:e.search(n,t(this))}},250))})},this.change_order=function(t,a){this.reload(t,{order:a.attr("data-order"),orderby:a.attr("data-orderby"),page:1})},this.change_page=function(t,a){var e,n=this.get_args(t,"page");switch(a.data("dir")){case"back":e=n-1;break;case"next":e=n+1}this.reload(t,{order:this.get_args(t,"order"),orderby:this.get_args(t,"orderby"),page:e})},this.get_args=function(t,a){var e=JSON.parse(t.attr("data-args"));return a?!!e[a]&&e[a]:e},this.reload=function(a,e){e=t.extend({action:"get_admin_table_data",handler:a.attr("data-handler")},JSON.parse(a.attr("data-args")),e),LLMS.Ajax.call({data:e,beforeSend:function(){LLMS.Spinner.start(a.closest(".llms-table-wrap"))},success:function(t){LLMS.Spinner.stop(a.closest(".llms-table-wrap")),t.success&&(a.attr("data-args",t.data.args),a.find("thead").replaceWith(t.data.thead),a.find("tbody").replaceWith(t.data.tbody),a.find("tfoot").replaceWith(t.data.tfoot))}})},this.search=function(t,a){var e=a.val();len=e.length,(0===len||len>=3)&&this.reload(t,{page:1,search:a.val()})},this.init()};window.llms.admin_tables=new e}(jQuery);